(this["webpackJsonpskunexus-recruit"]=this["webpackJsonpskunexus-recruit"]||[]).push([[0],{121:function(e,t,n){},127:function(e,t,n){},227:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(16),c=n.n(i),s=(n(121),n(54)),o=n(33),l=n(9),u=n(7),d=n(3);function j(e){return{textAlign:"number"===e?"right":void 0}}var h=function(e){var t=e.data,n=t.header,r=void 0===n?[]:n,a=t.values,i=void 0===a?[]:a,c=t.actions,s=void 0===c?[]:c,o=!!s.length;return Object(d.jsxs)(u.m,{striped:!0,className:"gridTable",children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[r.map((function(e){var t=e.name,n=e.type;return Object(d.jsxs)("th",{style:j(n),children:[t," ","number"===n?"(number)":"(string)"]},"".concat(t,"-header"))})),o&&Object(d.jsx)("th",{children:"Actions"})]})}),Object(d.jsx)("tbody",{children:i.map((function(e,t){return Object(d.jsxs)("tr",{style:{height:100},children:[r.map((function(t){var n=t.name,r=t.type,a=void 0===r?"string":r,i=e[n];return Object(d.jsx)("td",{style:j(a),children:"array"===a?i.length:i},n)})),o&&Object(d.jsx)("td",{className:"gridActions",children:s.map((function(n){var r=n.label,a=n.action,i=n.show;return i&&!i(e)?null:Object(d.jsx)(u.a,{color:"primary",onClick:function(){return a(e)},icon:"navbar-toggler-icon",children:r},"".concat(r,"-").concat(t))}))})]},e.url)}))})]})},b=n(11),m=n(22);function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Object(m.useQuery)([e].concat(Object(b.a)(t)),(function(){return Promise.allSettled(t.map((function(e){return fetch(e).then((function(e){return e.json()}))})))}))}function p(e,t){Object(r.useEffect)((function(){void 0===e.state&&t.push("/")}),[e,t])}var O=function(){var e,t,n,r=Object(l.f)(),a=Object(l.g)(),i=f("films",null===(e=a.state)||void 0===e?void 0:e.films);return p(a,r),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("h1",{children:[" Films that happen at ",null===(t=a.state)||void 0===t?void 0:t.name," Planet"]}),Object(d.jsx)(h,{data:{header:[{name:"title"},{name:"director"},{name:"url"}],values:(null===(n=i.data)||void 0===n?void 0:n.map((function(e){return e.value})))||[]}}),Object(d.jsx)(u.a,{onClick:function(){return r.push("/planets")},children:"Back to Planets"})]})};var v=function(){var e,t,n=Object(l.f)(),r=Object(l.g)(),a=f("residents",null===(e=r.state)||void 0===e?void 0:e.residents).data;return p(r,n),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("h1",{children:["Star Wars Residents from ",null===(t=r.state)||void 0===t?void 0:t.name]}),Object(d.jsx)(h,{data:{header:[{name:"name"},{name:"skin_color"},{name:"gender"},{name:"eye_color"},{name:"mass",type:"number"},{name:"height",type:"number"}],values:(null===a||void 0===a?void 0:a.map((function(e){return e.value})))||[]}}),Object(d.jsx)(u.a,{onClick:function(){return n.push("/")},children:"Back to Planets"})]})},x=n.p+"static/media/space.516091e5.jpg",g=(n(127),function(){return Object(d.jsxs)("div",{className:"not-found-page",style:{backgroundImage:"url(".concat(x,")")},children:[Object(d.jsx)("h1",{children:"404"}),Object(d.jsx)("p",{children:"Page not found"})]})}),y=n(23);function k(e){return Object(m.useQuery)(["planets",Number(e)],(function(){return function(){return fetch("https://swapi.dev/api/planets?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)).then((function(e){return e.json()}))}(e)}),{keepPreviousData:!0,staleTime:31536e6,cacheTime:31536e6})}function C(e){var t=e.children,n=e.type,r=e.placeholder,a=e.value,i=e.onChange;return Object(d.jsxs)(u.f,{children:[Object(d.jsx)(u.g,{children:r}),Object(d.jsx)(u.e,{multiple:"select"===n,type:n,placeholder:r,value:a,onChange:i,children:t})]})}function w(e){var t,n=e.header,r=e.name,a=e.formik,i=e.children,c=a.values[r],s=(null===(t=n.find((function(e){return e.name===r})))||void 0===t?void 0:t.type)||"string";return Object(d.jsx)(C,{placeholder:r,value:c,type:s,onChange:function(e){var t=e.target.value;console.log(t),a.setFieldValue(r,t)},children:i})}var S=n(106),F=n(19);function P(e){return Object(d.jsxs)(u.d,{children:[Object(d.jsx)(u.h,{for:"exampleSelectMulti",children:"Select Multiple"}),Object(d.jsx)(u.e,{multiple:!0,type:"select",value:e.formik.values.terrain.split(",").map((function(e){return e.replaceAll(" ","")})),onChange:function(t){for(var n,r=[],a=0,i=t.target.options.length;a<i;a++)(n=t.target.options[a]).selected&&r.push(n.value);e.formik.setFieldValue("terrain",r.join(","))},children:e.terrain.split(",").map((function(e){return Object(d.jsx)("option",{children:e},e)}))})]})}var _=function(e){var t=e.header,n=e.onClose,r=e.planet,a=function(e,t){return Object(S.a)({initialValues:e,validationSchema:F.a().shape({name:F.b().required(),rotation_period:F.b().required(),orbital_period:F.b().required(),diameter:F.b().required(),climate:F.b().required(),gravity:F.b().required(),terrain:F.b().required(),surface_water:F.b().required()}),onSubmit:function(e,n){if(Math.random()>.5)return alert("[SUCCESS] ".concat(JSON.stringify(e))),n.resetForm(),void t();alert("[ERROR] ".concat(JSON.stringify(e))),n.resetForm(),t()}})}(r,n);return Object(d.jsx)(u.i,{isOpen:void 0!==r,toggle:n,children:Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(u.l,{toggle:n,children:["Edit ",r.name," Planet"]}),Object(d.jsxs)("form",{onSubmit:a.handleSubmit,children:[Object(d.jsxs)(u.j,{children:[Object(d.jsx)(w,{header:t,formik:a,name:"name"}),Object(d.jsx)(w,{header:t,formik:a,name:"rotation_period"}),Object(d.jsx)(w,{header:t,formik:a,name:"orbital_period"}),Object(d.jsx)(w,{header:t,formik:a,name:"diameter"}),Object(d.jsx)(w,{header:t,formik:a,name:"climate"}),Object(d.jsx)(w,{header:t,formik:a,name:"gravity"}),Object(d.jsx)(P,{formik:a,terrain:r.terrain}),Object(d.jsx)(w,{header:t,formik:a,name:"surface_water"})]}),Object(d.jsxs)(u.k,{children:[Object(d.jsx)(u.a,{onClick:n,children:"Cancel"}),Object(d.jsx)(u.a,{disabled:!(a.isValid&&a.dirty),color:"primary",children:"Do Something"})]})]})]})})};var N=function(e){var t=e.headers,n=void 0===t?[]:t,a=Object(l.f)(),i=Object(r.useState)(1),c=Object(y.a)(i,2),s=c[0],o=c[1],j=Object(r.useState)(void 0),m=Object(y.a)(j,2),f=m[0],p=m[1],O=k(s),v=O.data,x=O.isFetching,g=function(e){return[{name:"name"},{name:"rotation_period",type:"number"},{name:"orbital_period",type:"number"},{name:"diameter",type:"number"},{name:"climate"},{name:"gravity"},{name:"terrain"},{name:"surface_water",type:"number"}].concat(Object(b.a)(e))}(n),C=function(e,t){return[{label:"Go to Films",show:function(e){return e.films.length>0},action:function(t){console.log("redirect to grid with ".concat(t.films.length," Films")),e.push("/films",{films:t.films,name:t.name})}},{label:"Go to Residents",show:function(e){return e.residents.length>0},action:function(t){var n=t.residents;console.log("redirect to grid with ".concat(n.length," Residents")),console.log(n),e.push("/residents",{residents:t.residents,name:t.name})}},{label:"Edit Planet",action:function(e){t(e)}},{label:"Go to Planet",action:function(t){var n=t.url.split("/"),r=n[n.length-2];e.push("/planet/".concat(r))}}]}(a,p);return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)("h1",{children:"Star Wars Planets"}),void 0!==f&&Object(d.jsx)(_,{planet:f,onClose:function(){return p(void 0)},header:g}),x?Object(d.jsx)("h2",{children:"Loading..."}):Object(d.jsx)(h,{data:{header:g,values:(null===v||void 0===v?void 0:v.results)||[],actions:C}}),Object(d.jsx)("div",{children:Object(d.jsx)(u.c,{children:Object(d.jsx)(u.b,{children:Array.from({length:(null===v||void 0===v?void 0:v.count)/10},(function(e,t){return t+1})).map((function(e){return Object(d.jsx)(u.a,{onClick:function(){return o(e)},children:e},e)}))})})})]})};var q=function(){var e=function(e){return Object(m.useQuery)(["planet",e],(function(){return fetch("https://swapi.dev/api/planets/".concat(e)).then((function(e){return e.json()}))}))}(Object(l.h)().id),t=e.isLoading,n=e.data,r=Object(l.f)();return t?Object(d.jsx)("div",{children:Object(d.jsx)("h2",{children:"loading planet"})}):Object(d.jsxs)("div",{children:[Object(d.jsx)("h2",{children:n.name}),Object(d.jsxs)("h4",{children:["Climate: ",n.climate]}),Object(d.jsx)(u.a,{onClick:function(){return r.push("/planets")},children:"Back to Planets"})]})},A=new m.QueryClient({refetchOnMount:!1,refetchOnReconnect:!1,refetchInterval:1e6,refetchOnWindowFocus:!1,refetchIntervalInBackground:1e6,staleTime:31536e6,cacheTime:31536e6}),E=function(){return Object(r.useEffect)((function(){window.process=Object(s.a)({},window.process)}),[]),Object(d.jsx)(m.QueryClientProvider,{client:A,children:Object(d.jsx)(o.a,{basename:"/startwars",children:Object(d.jsxs)(l.c,{children:[Object(d.jsx)(l.a,{exact:!0,path:"/",component:N}),Object(d.jsx)(l.a,{exact:!0,path:"/planets",render:function(e){return Object(d.jsx)(N,Object(s.a)(Object(s.a)({},e),{},{headers:[{name:"residents",type:"array"},{name:"films",type:"array"}]}))}}),Object(d.jsx)(l.a,{exact:!0,path:"/planet/:id",component:q}),Object(d.jsx)(l.a,{exact:!0,path:"/films",component:O}),Object(d.jsx)(l.a,{exact:!0,path:"/residents",component:v}),Object(d.jsx)(l.a,{component:g})]})})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,236)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};n(226);c.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(E,{})}),document.getElementById("root")),R()}},[[227,1,2]]]);
//# sourceMappingURL=main.6767e599.chunk.js.map